# Binance API
# Keep secrets empty here. Use APP_SECRETS_DIR for real credentials.
BINANCE_API_KEY=
BINANCE_API_SECRET=
BINANCE_TESTNET=false
BINANCE_MARKET_DATA_BASE_URL=https://data-api.binance.vision
BINANCE_MARKET_MAX_RETRIES=3
BINANCE_MARKET_MIN_INTERVAL_MS=50
BINANCE_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
BINANCE_CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2
BINANCE_CIRCUIT_BREAKER_TIMEOUT_SECONDS=60
BINANCE_CIRCUIT_BREAKER_WINDOW_SECONDS=60

# Telegram
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_HEARTBEAT_ENABLED=true
TELEGRAM_HEARTBEAT_HOURS=4
TELEGRAM_SUMMARIES_ENABLED=true
TELEGRAM_SUMMARY_HOURS=6
TELEGRAM_DAILY_WRAP_ENABLED=true

# Database
DATABASE_URL=sqlite+aiosqlite:///./data/trading.db
DB_AUTO_MIGRATE=true
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE_SECONDS=3600

# Trading
TRADING_PAIR=BTCUSDT
TRADING_TIMEFRAMES=1h,4h
TRADING_LIVE_MODE=false
TRADING_ACTIVE_STRATEGY=trend_ema
TRADING_REQUIRE_DATA_READY=true
TRADING_SPOT_POSITION_MODE=long_flat
TRADING_PAPER_STARTING_EQUITY=10000
TRADING_GRID_LOOKBACK_1H=120
TRADING_GRID_ATR_PERIOD_1H=14
TRADING_GRID_LEVELS=6
TRADING_GRID_SPACING_MODE=geometric
TRADING_GRID_MIN_SPACING_BPS=25
TRADING_GRID_MAX_SPACING_BPS=220
TRADING_GRID_TREND_TILT=1.25
TRADING_GRID_VOLATILITY_BLEND=0.7
TRADING_GRID_TAKE_PROFIT_BUFFER=0.02
TRADING_GRID_STOP_LOSS_BUFFER=0.05
TRADING_GRID_COOLDOWN_SECONDS=0
TRADING_GRID_AUTO_INVENTORY_BOOTSTRAP=true
TRADING_GRID_BOOTSTRAP_FRACTION=1.0
TRADING_GRID_ENFORCE_FEE_FLOOR=false
TRADING_GRID_MIN_NET_PROFIT_BPS=30
TRADING_GRID_OUT_OF_BOUNDS_ALERT_COOLDOWN_MINUTES=60
TRADING_GRID_RECENTER_MODE=aggressive
TRADING_STOP_LOSS_ENABLED=true
TRADING_STOP_LOSS_GLOBAL_EQUITY_PCT=0.15
TRADING_STOP_LOSS_MAX_DRAWDOWN_PCT=0.20
TRADING_STOP_LOSS_AUTO_CLOSE_POSITIONS=true
TRADING_ADVISOR_INTERVAL_CYCLES=30
TRADING_MIN_CYCLE_INTERVAL_SECONDS=5
TRADING_RECONCILIATION_INTERVAL_CYCLES=30
TRADING_RECONCILIATION_WARNING_TOLERANCE=1
TRADING_RECONCILIATION_CRITICAL_TOLERANCE=100

# Risk
RISK_PER_TRADE=0.005
RISK_MAX_DAILY_LOSS=0.02
RISK_MAX_EXPOSURE=0.25
RISK_FEE_BPS=10
RISK_SLIPPAGE_BPS=5

# Approval
APPROVAL_TIMEOUT_HOURS=2
APPROVAL_AUTO_APPROVE_ENABLED=false

# LLM advisor (optional, external provider)
LLM_ENABLED=false
LLM_PROVIDER=openai
LLM_MODEL=gpt-4.1-mini
LLM_API_KEY=
LLM_BASE_URL=
LLM_TIMEOUT_SECONDS=20
LLM_MAX_RETRIES=2
LLM_TEMPERATURE=0.15
LLM_MAX_OUTPUT_TOKENS=1200
LLM_MAX_PROPOSALS=3
LLM_MIN_CONFIDENCE=0.55
LLM_PREFER_LLM=true
LLM_FALLBACK_TO_RULES=true
LLM_SYSTEM_PROMPT=You are a senior crypto spot-grid risk advisor. Output strict JSON only. Never propose disabling safety controls or bypassing approvals. Propose parameter diffs only.

# API
API_HOST=127.0.0.1
API_PORT=8000
API_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:5173,http://127.0.0.1:5173
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_REQUESTS_PER_MINUTE=600
API_RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=60
API_RATE_LIMIT_EXEMPT_PATHS=/health,/ready,/metrics,/docs,/openapi.json,/redoc

# Auth & RBAC (recommended for production)
AUTH_ENABLED=false
AUTH_SECRET_KEY=
AUTH_TOKEN_TTL_MINUTES=480
AUTH_ADMIN_USERNAME=admin
AUTH_ADMIN_PASSWORD=
AUTH_OPERATOR_USERNAME=operator
AUTH_OPERATOR_PASSWORD=
AUTH_VIEWER_USERNAME=viewer
AUTH_VIEWER_PASSWORD=

# Logging
LOG_LEVEL=INFO
APP_LOG_JSON=false
APP_LOG_FILE=./logs/app.log

# Runtime profile + secrets
APP_ENV=dev
APP_SECRETS_DIR=./.secrets

# Webhook alerts (optional)
WEBHOOK_ENABLED=false
WEBHOOK_URL=
WEBHOOK_TIMEOUT_SECONDS=10
WEBHOOK_MAX_RETRIES=2
WEBHOOK_CRITICAL_ONLY=true

# Observability
OBS_METRICS_ENABLED=true

# Live execution resilience
LIVE_MAX_RETRIES=3
LIVE_MIN_INTERVAL_MS=250
LIVE_RECV_WINDOW_MS=5000

# Web
VITE_API_BASE_URL=http://127.0.0.1:8000
